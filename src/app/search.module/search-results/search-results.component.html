<div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="10px" class="filter-row">
    <button type="button" mat-flat-button color="accent" (click)="openFiltersDialog()">
        {{ 'search.filters' | translate }}
    </button>
    <button type="button" mat-flat-button color="accent" (click)="sidenav.toggle()">
        {{ 'search.toggle-map' | translate }}
    </button>
</div>

<mat-sidenav-container class="search-container">
    <mat-sidenav #sidenav class="sidenav-map"
        mode="side" position="end" opened="true" 
        [fixedInViewport]="true" [fixedTopGap]="0"
        [fixedBottomGap]="0">
        <div id="map">
            <app-results-map [imagesLoaded]="imagesLoaded" [results]="results"></app-results-map>
        </div>
    </mat-sidenav>
  
    <mat-sidenav-content class="search-list mt-2" ngClass.gt-sm="p-left">
        <!-- <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px" class="filter-row">
            <button type="button" mat-stroked-button>
                Filters
            </button>
            <button type="button" mat-stroked-button (click)="sidenav.toggle()">
                Toggle map
            </button>
        </div> -->

        <div fxLayout="row wrap" class="products-wrapper"
            infinite-scroll
            [infiniteScrollDistance]="distance"
            [infiniteScrollThrottle]="throttle"
            (scrolled)="onScroll()"
        >
            <div  *ngFor="let result of results" fxFlex="100" class="col border-bottom">
                <mat-card class="product-item mat-elevation-z0 py-2">
                    <div fxFlex="100" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start start">
                        <div class="py-2 image-wrapper">
                            <a [routerLink]="['/search/results', result.id]" class="image-link">
                                <ngx-skeleton-loader *ngIf="result.description.images[0] == undefined" count="1" appearance="circle" [theme]="{
                                    width: '300px',
                                    height: '200px',
                                    'border-radius': '1px'
                                  }">
                                </ngx-skeleton-loader>
                                <img *ngIf="result.description.images[0] != undefined" [src]="result.description.images[0].url">
                            </a>
                        </div>
                        <div class="p-2 mb-1">                                                                     
                            <a [routerLink]="['/search/results', result.id]" class="title">
                                {{ result.location.name }}
                            </a>
                            <p class="text-muted lh mb-0">
                                {{ 'search.location-type' | translate }}: {{ 'host.listing.' + result.location.listingTypeName | translate }}
                            </p>
                            <p class="text-muted lh mb-0">
                                {{ 'search.office-types' | translate }}: <span *ngFor="let officeType of result.description.officeTypes">{{ 'host.listing.' + officeType.code | translate }}, </span>
                            </p>
                            <div fxLayout="row" fxLayoutAlign="space-between center" class="prices">
                                <!-- <app-rating [ratingsCount]="product.ratingsCount" [ratingsValue]="product.ratingsValue" [direction]="'column'"></app-rating> -->
                                <p class="new-price mb-0">
                                    {{ 'search.list-price' | translate: { listPrice: result.price.listPrice | number : '1.2-2' } }}
                                </p>
                            </div>                            
                            <div class="divider"></div>
                            <div class="icons">
                                <a [routerLink]="['/search/results', result.id]" mat-flat-button color="primary">Reserve</a>
                            </div>
                        </div>
                    </div>
                </mat-card>
            </div>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>
